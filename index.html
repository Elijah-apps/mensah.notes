
<!DOCTYPE html>
<html lang="en">

<head>
   <!--sse-->
   <script>
      var rtads=["top_banner"];
      var rtlots=[{placement: "adngin-top_banner-0", adUnit: "top_banner" }];
   </script>
   <script>var mobileAdsNum=0;</script>
   <script async src="/lib/tagmng8.js"></script>
   <!--/sse-->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mensah Notepad | Write your notes online</title>
	<meta name="description" content="Notepad online for text editing. Free notepad app, no login required.">
	<meta property="og:type" content="website">
	<meta property="og:image" content="">
	<meta property="og:url" content="">
	<meta property="og:title" content="Notepad online">
   <meta property="og:description" content="Notepad online free app.">

	<link rel="apple-touch-icon" sizes="180x180" href="/lib/favicon/notepad/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/lib/favicon/notepad/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/lib/favicon/notepad/favicon-16x16.png">
	<link rel="manifest" href="/lib/favicon/notepad/manifest.json">
	<link rel="mask-icon" href="/lib/favicon/notepad/safari-pinned-tab.svg" color="#5bbad5">
	<link rel="shortcut icon" href="/lib/favicon/notepad/favicon.ico">
	<meta name="msapplication-config" content="/lib/favicon/notepad/browserconfig.xml">
	<meta name="theme-color" content="#ffffff">	
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
   <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined">
   <style>
      #private-alert,#exit-alert,#autoSaveModal { display:none; }
      .img-invert { filter:invert(1); }
		html, body {
			margin:0;
			height:100%;
			width:100%;
			font-family:Arial, Helvetica, sans-serif;
		}
		#header { 
			background:#444;
         height:57px;
		}
		.sdiv
		{
         margin-top:15px;
			display:inline-block;
			vertical-align:top;
			margin-left:30px;
			margin-right:0px;
		}
      h1 { font-size: medium; }
      /*#share { margin-top:15px; }*/
		#share>a>img { width:40px; height:40px; }
		#share>a:nth-child(1)>img { color:#4867AA; }
		.social-twitter { color:#1DA1F2; }
		.social-whatsapp { color:#2DB742; }
		.social-e-mail-envelope { color:#468A7F; }
      /*.adslot { display:inline-block; height:60px; max-height:60px; width:468px; }*/
		@media (max-width:949px) {
			/*.sdiv { margin-top:10px; margin-bottom:10px; }*/
			#share { margin-top:0; display:none; }
			#ad_div { display:none; padding-top:0px; padding-bottom:20px; }
			/*.adslot { max-width:320px; width:320px; max-height:50px; height:50px; }*/
		}
		@media (min-width:950px) {
			#ad_div { margin-left:50px; margin-top:5px; }
		}
		#bread { margin-top:20px; color:#ddd; font-size:medium;  }
		#bread a { color:#ddd; text-decoration:none; padding:20px 5px; }
		#bread a:hover { color:#fff; background:#444; }
		#main {
			margin:0;
			height:90%;
         height:calc(100% - 180px);
		}
		@media (max-width:670px) {
         #toolbar .btn:nth-child(n+9) { display:none; }
		}
		textarea, #area {
			height:100%;
			width:100%;
			margin:0;
			padding-top:3px;
			padding-left:50px;
			/*background:#fdf8c8;*/
			font-family:verdana;
		   font-family: Arial, Helvetica, Sans-serif;
			font-size:large;
			outline: none;
         border:0;
         resize: none;
		}
		.notes {
         color:black;
			background-image: -webkit-linear-gradient(90deg, #d0a090 1px, #d0a090 1px), linear-gradient(#fdf8c8, #fdf8c8 23px, #ccd 23px, #ccd 24px, #fdf8c8 24px);
			background-image: -moz-linear-linear-gradient(90deg, #d0a090 1px, #d0a090 1px), linear-gradient(#fdf8c8, #fdf8c8 23px, #ccd 23px, #ccd 24px, #fdf8c8 24px);
			background-image: -ms-linear-gradient(90deg, #d0a090 1px, #d0a090 1px), linear-gradient(#fdf8c8, #fdf8c8 23px, #ccd 23px, #ccd 24px, #fdf8c8 24px);
			background-image: -o-linear-gradient(90deg, #d0a090 1px, #d0a090 1px), linear-gradient(#fdf8c8, #fdf8c8 23px, #ccd 23px, #ccd 24px, #fdf8c8 24px);
			background-image: linear-gradient(90deg, #d0a090 1px, #d0a090 1px), linear-gradient(#fdf8c8, #fdf8c8 23px, #ccd 23px, #ccd 24px, #fdf8c8 24px);
			background-size: 2px 100%, 100% 24px;
			background-position: 40px top, left 0px;
			background-repeat:no-repeat, repeat;
		   line-height: 24px !important;
		   background-attachment: local;
		}
		.notes-dark {
         color:#ffffcc;
         color:#eeeecc;
			background-image: -webkit-linear-gradient(90deg, #642 1px, #642 1px), linear-gradient(#343a40, #343a40 23px, #554 23px, #554 24px, #343a40 24px);
			background-image: -moz-linear-linear-gradient(90deg, #642 1px, #642 1px), linear-gradient(#343a40, #343a40 23px, #554 23px, #554 24px, #343a40 24px);
			background-image: -ms-linear-gradient(90deg, #642 1px, #642 1px), linear-gradient(#343a40, #343a40 23px, #554 23px, #554 24px, #343a40 24px);
			background-image: -o-linear-gradient(90deg, #642 1px, #642 1px), linear-gradient(#343a40, #343a40 23px, #554 23px, #554 24px, #343a40 24px);
			background-image: linear-gradient(90deg, #642 1px, #642 1px), linear-gradient(#343a40, #343a40 23px, #554 23px, #554 24px, #343a40 24px);
			background-size: 2px 100%, 100% 24px;
			background-position: 40px top, left 0px;
			background-repeat:no-repeat, repeat;
		   line-height: 24px !important;
		   background-attachment: local;
		}
		#bar {
         position:fixed;
         bottom:0;
         left:0;
         width:100%;
         height:35px;
         padding:5px 40px;
         border-top:#ccc 1px solid; 
         background:#f8f9fa;
         z-index:1000;
      }

		table,th,td,tr { 
			border-width: 0px;
			border-collapse:collapse;
			padding:0px;
			margin:0px;
		}
      #menu2 { height:38px; width:100%; padding-left:30px; background:#6c757d; background:#f8f9fa; }
      #menu2 .dropdown { display:inline-block; margin-left:0; margin-right:0; }
      #menu2 .dropdown button i { vertical-align: middle; }
      #menu2 .dropdown a i { vertical-align: middle; }
		#tlines { visibility:hidden; }
      #toolbar { height:40px; border-bottom:#666 1px solid; padding-left:30px; background:#f8f9fa; width:100%; display:inline-block; }
      #getFilename { max-width:700px; padding-left:40px; display:none; }

		@media (max-width:670px) {
         #toolbar .btn { padding:.375rem .41rem; }
         #menu2, #toolbar { padding-left: 5px; }
			#bar { padding:5px 20px; }
         body { transform: scale(1); }
		}
	</style>
</head>

<body>
<div id="header" class="text-light bg-dark">
   <div id="bread" class="sdiv">
      <h1><a href="/">Home</a>&rsaquo;<a href="index.html">Tools</a>&rsaquo;<a href="notepad.html">Notepad</a></h1>
   </div>
   <div class="sdiv" id="share">
      <a id="sharefb" href="#" title="Share text on Facebook" target="_blank"><img alt="Facebook" src="/lib/icons/glyphicons_all/social/png/glyphicons-social-31-facebook@2xb.png"></a>
      <a id="sharetw" href="#" title="Share text on Twitter" target="_blank"><img alt="Twitter" src="/lib/icons/glyphicons_all/social/png/glyphicons-social-32-twitter@2xb.png"></a>
      <a id="sharewa" href="#" title="Share text on WhatsApp" target="_blank"><img alt="WhatsApp" src="/lib/icons/glyphicons_all/social/png/glyphicons-social-62-whatsapp@2xb.png"></a>
      <a id="shareml" href="#" title="Email text"><img alt="Mail" src="/lib/icons/glyphicons_all/social/png/glyphicons-social-14-e-mail-envelope@2xb.png"></a>
   </div>
   <div class="sdiv" id="ad_div">
      <!-- rapidtables_top_banner -->
      <div id="adngin-top_banner-0"></div>
   </div>
</div>
<div id="menu2">
   <div class="dropdown">
   <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
      File
   </button>
   <!--<ul class="dropdown-menu dropdown-menu-dark">-->
   <ul class="dropdown-menu">
      <li><a class="dropdown-item" href="#" onclick="New()"><i class="material-icons-outlined">insert_drive_file</i> New</a></li>
      <li><a class="dropdown-item" href="#" onclick="Open()"><i class="material-icons-outlined">folder_open</i> Open</a></li>
      <li><a class="dropdown-item" href="#" onclick="Save()"><i class="material-icons-outlined">save_alt</i> Save</a></li>
      <li><a class="dropdown-item" href="#" onclick="Save_As()"><i class="material-icons-outlined">save_alt</i> Save As...</a></li>
      <li><a class="dropdown-item" href="#" onclick="Share()"><i class="material-icons-outlined">share</i> Share</a></li>
      <li><a class="dropdown-item" href="#" onclick="Print()"><i class="material-icons-outlined">print</i> Print</a></li>
   </ul>
   </div>
   <div class="dropdown">
   <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
      Edit
   </button>
   <ul class="dropdown-menu">
      <li><a class="dropdown-item" href="#" onclick="Undo()"><i class="material-icons-outlined">undo</i> Undo</a></li>
      <li><a class="dropdown-item" href="#" onclick="Redo()"><i class="material-icons-outlined">redo</i> Redo</a></li>
      <li><hr class="dropdown-divider"></li>
      <li><a class="dropdown-item" href="#" onclick="Cut(0)"><i class="material-icons-outlined">content_cut</i> Cut</a></li>
      <li><a class="dropdown-item" href="#" onclick="Copy()"><i class="material-icons-outlined">content_copy</i> Copy</a></li>
      <li><a class="dropdown-item" href="#" onclick="Paste()"><i class="material-icons-outlined">content_paste</i> Paste</a></li>
      <li><hr class="dropdown-divider"></li>
      <li><a class="dropdown-item" href="#" onclick="Del()"><i class="material-icons-outlined">clear</i> Delete</a></li>
      <li><a class="dropdown-item" href="#" onclick="SelectAll()"><i class="material-icons-outlined">select_all</i> Select All</a></li>
   </ul>
   </div>
   <div class="dropdown">
   <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
      View
   </button>
   <ul class="dropdown-menu">
      <li><a class="dropdown-item" href="#" onclick="darkModeToggle()"><i class="material-icons-outlined">dark_mode</i> Dark mode</a></li>
      <li><a class="dropdown-item" href="#" onclick="IncSize()"><i class="material-icons-outlined">zoom_in</i> Zoom In</a></li>
      <li><a class="dropdown-item" href="#" onclick="DecSize()"><i class="material-icons-outlined">zoom_out</i> Zoom Out</a></li>
      <li><hr class="dropdown-divider"></li>
      <!--<li><a class="dropdown-item" href="#" onclick="TextLinesToggle()"><i class="material-icons-outlined" id="tlines">check</i> Text Lines</a></li>-->
      <!--<li><a class="dropdown-item" href="#" onclick="showPrefModal()"><i class="material-icons-outlined">settings</i> Preferences</a></li>-->
      <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#prefModal"><i class="material-icons-outlined">settings</i> Preferences</a></li>
   </ul>
   </div>
   <div class="dropdown">
   <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
      Help
   </button>
   <ul class="dropdown-menu">
      <li><a href="#" class="dropdown-item" onclick="window.open('notepad_help.html','_blank')"><i class="material-icons-outlined">help</i> Help</a></li>
      <li><a href="#" class="dropdown-item" onclick="window.open('notepad_help.html#feedback','_blank')"><i class="material-icons-outlined">feedback</i> Send feedback</a></li>
   </ul>
   </div>
</div>
<div id="toolbar" class="btn-group" role="group" aria-label="Toolbar">
   <button type="button" title="Open"	onclick="Open()" class="btn btn-light"><img src="/lib/icons/material/svg/folder_open_FILL0_wght400_GRAD0_opsz24.svg" alt="open"></button>
   <button type="button" title="Save to Downloads folder" onclick="Save()" class="btn btn-light"><img src="/lib/icons/material/svg/download_FILL0_wght400_GRAD0_opsz24.svg" alt="save"></button>
   <button type="button" title="Share text" onclick="Share()" class="btn btn-light"><img src="/lib/icons/material/svg/share_FILL0_wght400_GRAD0_opsz24.svg" alt="share"></button>
   <button type="button" title="Cut"	onclick="Cut(0)" class="btn btn-light"><img src="/lib/icons/material/svg/content_cut_FILL0_wght400_GRAD0_opsz24.svg" alt="cut"></button>
   <button type="button" title="Copy"	onclick="Copy()" class="btn btn-light"><img src="/lib/icons/material/svg/content_copy_FILL0_wght400_GRAD0_opsz24.svg" alt="copy"></button>
   <button type="button" title="Paste" onclick="Paste()" class="btn btn-light"><img src="/lib/icons/material/svg/content_paste_FILL0_wght400_GRAD0_opsz24.svg" alt="paste"></button>
   <button type="button" title="Undo"	onclick="Undo()" class="btn btn-light"><img src="/lib/icons/material/svg/undo_FILL0_wght400_GRAD0_opsz24.svg" alt="undo"></button>
   <button type="button" title="Redo"	onclick="Redo()" class="btn btn-light"><img src="/lib/icons/material/svg/redo_FILL0_wght400_GRAD0_opsz24.svg" alt="redo"></button>
   <button type="button" title="Zoom Out" onclick="DecSize()" class="btn btn-light"><img src="/lib/icons/material/svg/zoom_out_FILL0_wght400_GRAD0_opsz24.svg" alt="zoom out"></button>
   <button type="button" title="Zoom In" onclick="IncSize()" class="btn btn-light"><img src="/lib/icons/material/svg/zoom_in_FILL0_wght400_GRAD0_opsz24.svg" alt="zoom in"></button>
   <button type="button" title="Spell Check" id="spellbtn" aria-label="Spell Check" onclick="OnSpell()" class="btn btn-light" aria-pressed="true"><img src="/lib/icons/material/svg/spellcheck_FILL0_wght400_GRAD0_opsz24.svg" alt="spellcheck"></button>
   <a href="notepad_help.html" target="_blank" title="Help" class="btn btn-light"><img src="/lib/icons/material/svg/help_FILL0_wght400_GRAD0_opsz24.svg" alt="help"></a>
   <input type="file" multiple id="fileElem" name="fileElem[]" style="visibility:hidden; width:30px" onchange="loadFile()">
</div>
<div id="private-alert" class="alert alert-warning alert-dismissible fade show shadow-sm mb-0 w-100 px-5" role="alert">
   The Notepad's text is saved to a temporary cache and might be deleted when you delete your browsing history/cache.
   Use the Save button to save the text to the <i>Downloads</i> folder.
   Avoid using Notepad with Incognito/Private window, or your notes will not be saved to the browser's cache!<br>
   <button type="button" class="btn btn-sm btn-secondary ml-3" data-bs-dismiss="alert" aria-label="Close">Close</button>
   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
<div id="exit-alert" class="alert alert-warning alert-dismissible fade show shadow-sm mb-0 w-100 px-5" role="alert">
   Enable auto save when page is closed<br>
   <button type="button" onclick="showPrefModal()" class="btn btn-sm btn-success ml-3" data-bs-dismiss="alert" aria-label="Enable">Enable</button>
   <button type="button" class="btn btn-sm btn-secondary ml-3" data-bs-dismiss="alert" aria-label="Close">Close</button>
   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
<noscript>
   <div class="alert alert-danger" style="margin-bottom:0">Please <a href="https://www.enable-javascript.com/" target="_blank" rel="nofollow">enable Javascript in your browser's settings</a> to allow full page functionality!</div>
</noscript>
<div id="getFilename" class="row">
   <label class="col-sm-3 col-form-label">Enter file name</label>
   <div class="input-group col-sm-9">
      <input type="text" id="filename" name="filename" placeholder="filename.txt" class="form-control">
      <div class="input-group-append">
         <input type="button" id="save" name="save" value="Save" onclick="saveFile()" class="btn btn-light">
      </div>
      <div class="input-group-append">
         <input type="button" id="cancel" name="cancel" value="Cancel" onclick="cancelSaveFile()" class="btn btn-light">
      </div>
   </div>
</div>
<div id="main">
   <textarea id="area" name="S1" spellcheck="false" autofocus></textarea>
</div>
<div id="bar" class="text-dark bg-light"></div>
<div class="modal fade" id="prefModal" tabindex="-1" aria-labelledby="prefModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-scrollable">
   <div class="modal-content">
      <div class="modal-header">
      <h5 class="modal-title" id="prefModalLabel">Preferences</h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
      <div class="mt-3">
         <button type="button" id="resetParamsBtn" class="btn btn-secondary">Reset preferences</button>
      </div>
      <div class="mt-3">
         <div class="custom-control custom-switch">
            <input type="checkbox" id="darkmodeSwitch" class="custom-control-input">
            <label class="custom-control-label" for="darkmodeSwitch">Dark mode</label>
         </div>
      </div>
      <div class="mt-3">
         <div class="custom-control custom-switch">
            <input type="checkbox" id="textLinesSwitch" class="custom-control-input">
            <label class="custom-control-label" for="textLinesSwitch">Text lines (supported in Chrome)</label>
         </div>
      </div>
      <div class="mt-3">
         <div class="custom-control custom-switch mr-1">
            <input type="checkbox" id="autoSaveExit" class="custom-control-input">
            <label class="custom-control-label" for="autoSaveExit">Auto save on page close</label>
         </div>
      </div>
      <div class="mt-3">
         <label for="autoSaveSwitch">Auto save to <i>Downloads</i> folder</label>
         <div class="input-group">
         <div class="input-group-prepend">
         <div class="custom-control custom-switch mr-1">
            <input type="checkbox" id="autoSaveSwitch" class="custom-control-input" checked>
            <label class="custom-control-label" for="autoSaveSwitch"></label>
         </div>
         </div>
         <input type="number" min="1" step="1" id="autoSaveNum" placeholder="1" class="form-control">
         <div class="input-group-append">
            <select id="autoSaveSel" class="form-control">
               <option>Hours</option>
               <option selected>Days</option>
            </select>
         </div>
         </div>
      </div>
      <div class="mt-3">
         <label>Font size</label>
         <div class="input-group">
            <input type="number" id="fontSizeNum" class="form-control">
            <div class="input-group-append">
               <span class="input-group-text">px</span>
            </div>
         </div>
      </div>
      <div class="mt-3">
         <label>Font family</label>
         <select id="fontFamilySel" class="form-control">
            <option>Arial</option>
            <option>Courier</option>
            <option>cursive</option>
            <option>emoji</option>
            <option>fantasy</option>
            <option>Georgia</option>
            <option>Helvetica</option>
            <option>'Lucida Console'</option>
            <option>math</option>
            <option>monospace</option>
            <option>sans-serif</option>
            <option>serif</option>
            <option>Times</option>
            <option>'Times New Roman'</option>
            <option>Verdana</option>
         </select>
      </div>
      <div class="mt-3">
         <label>Font weight</label>
         <div class="input-group">
            <select id="fontWeightSel" class="form-control">
               <option>Normal</option>
               <option style="font-weight:bold">Bold</option>
            </select>
         </div>
      </div>
      </div>
      <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Close">Close</button>
      </div>
   </div>
</div>
</div>

<div class="modal fade" id="autoSaveModal" tabindex="-1" aria-labelledby="autoSaveModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="autoSaveModalLabel">Auto save / Backup</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
         <div class="mt-3">
            <label>Your text is not saved yet. Press the button to backup/save your text to the <i>Downloads</i> folder. The browser will notify file download operation. Check the <i>Downloads</i> folder for the text file, after the download operation.</label>
            <button type="button" id="autoSaveDownBtn" class="btn btn-success w-100"><i class="material-icons-outlined align-bottom">save_alt</i> Save</button>
         </div>
         <div class="mt-3">
            <label>Open auto save preferences</label>
            <button type="button" id="autoSavePrefBtn" class="btn btn-secondary w-100">Open preferences</button>
         </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Close">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- rapidtables_bottom_adhesive -->
<div id="adngin-adhesive-0"></div>

<!-- #BeginEditable "docscript" -->
<!--sse-->
<script src="/lib/utils/utils.js"></script>
<script src="/lib/blobjs/Blob.js"></script>
<script src="/lib/filesaverjs/FileSaver.min.js"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/localforage/1.10.0/localforage.nopromises.min.js" integrity="sha512-s415S3P+oLGczcIVMI8O6yO/9xk3kYYCVRu+gOQUtVW5uiRvNpS6Cj6qDDdNV+j3JV+JVIyxifZC0y4cD5PpOQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/localforage/1.10.0/localforage.min.js" integrity="sha512-+BMamP0e7wn39JGL8nKAZ3yAQT2dL5oaXWr4ZYlTGkKOaoXM/Yj7c4oy50Ngz5yoUutAG17flueD4F6QpTlPng==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<!--
<script>
   var sharefb = document.getElementById("sharefb");
   var sharetw = document.getElementById("sharetw");
   var sharewa = document.getElementById("sharewa");
   var shareml = document.getElementById("shareml");
   var menu2 = document.getElementById("menu2");
   var toolbar = document.getElementById("toolbar");
   var getFilename = document.getElementById("getFilename");
   var bar = document.getElementById("bar");
   var area = document.getElementById("area");
   var fileElem=document.getElementById("fileElem");
   var resetParamsBtn = document.getElementById("resetParamsBtn");
   var autoSaveSwitch = document.getElementById("autoSaveSwitch");
   var autoSaveNum = document.getElementById("autoSaveNum");
   var autoSaveSel = document.getElementById("autoSaveSel");
   var textLinesSwitch = document.getElementById("textLinesSwitch");
   var darkmodeSwitch = document.getElementById("darkmodeSwitch");
   var fontSizeNum=document.getElementById("fontSizeNum");
   var fontFamilySel=document.getElementById("fontFamilySel");
   var fontWeightSel=document.getElementById("fontWeightSel");
   var autoSaveExit=document.getElementById("autoSaveExit");
   var autoSaveDownBtn=document.getElementById("autoSaveDownBtn");
   var autoSavePrefBtn=document.getElementById("autoSavePrefBtn");
   var filename = document.getElementById("filename");
   var spellbtn = document.getElementById("spellbtn");

   var resetParamsFlag=false;
 	var browser;
   var chars,words;
	var selectedText = "";
	var selectionStart,selectionEnd;
   var browser;
	var txt_hist,pos_hist,ihist,nhist,Nhist;
	var ctrlDown=false;
	var key={tabKey:9,enterKey:13,shiftKey:16,ctrlKey:17,altKey:18,capsKey:20,pageupKey:33,pagedownKey:34,leftKey:37,upKey:38,rightKey:39,downKey:40,delKey:46,aKey:65,cKey:67,sKey:83,vKey:86,xKey:88,yKey:89,zKey:90};
   var autoSaveTimeout=null;
   var isLocalTxtChange=false;
   var isFileTxtChange=false;
   var params;
   var paramsInit = {
      filename:"",
      //autoSaveDelay:3600000, //ms
      autoSaveDelay:86400000, //ms
      autoSaveLast:0, //ms
      autoSaveExit:false, //true!!!
      textLines:true,
      theme:0, //0-normal 1-dark
      fontSize:14,
      fontFamilySel:0, //Arial
      fontWeightSel:0 //Normal
   };
   // save when cache clear
   window.addEventListener("storage", function(event)
   {
      var txt=localStorage.getItem("notepad_text");
      if( txt==null ) LocalSave();
   });
   window.addEventListener('beforeunload', function(event)
   {
      if( isFileTxtChange && area.value!='' ) {
         if( params.autoSaveExit )
            saveFile();
         //else {
         //   event.preventDefault();
         //   event.returnValue = true;
         //   //return "Press the Save button to Save your text to the hard drive.";
         //}
      }
      if( resetParamsFlag==true )
         localStorage.removeItem("notepad_params");
   });
   document.addEventListener('visibilitychange', function(event)
   {
      if(document.visibilityState === "hidden") {
		   selectedText="";
         //if( isLocalTxtChange ) LocalSave();
         LocalSave();
      }
   });
   document.addEventListener('DOMContentLoaded', function(event)
	{
		txt_hist = new Array();
		pos_hist = new Array();
		Nhist = 10;
		nhist = 0;
		ihist = 0;
		
		//browser = get_browser();
      //if( browser=="Firefox" ) paramsInit.textLines=false;

      prefModal = new bootstrap.Modal('#prefModal', { keyboard: false });
      autoSaveModal = new bootstrap.Modal('#autoSaveModal', { keyboard: false });

      LocalLoad();

      area.onkeydown=function(e) { onkeydown(e); };
      area.onkeyup=function(e) {
         var noCharKeys=[key.shiftKey,key.ctrlKey,key.altKey,key.capsKey,key.pageupKey,key.pagedownKey,key.leftKey,key.upKey,key.rightKey,key.downKey];
         if( noCharKeys.indexOf(e.which)==-1 )
		      SetBar(1);
         else
		      SetBar(0);
		};
      area.onclick=function(e) {
			pos = getCaret();
			if( pos!=pos_hist[ihist] )
				Snapshot();
			SetBar(0);
			return false;
		};

      sharefb.href = "https://facebook.com/sharer/sharer.php?u="+encodeURIComponent(window.location.href)+"&title="+encodeURIComponent(document.title);
      sharetw.href = "https://twitter.com/intent/tweet?text="+encodeURIComponent(document.title)+"&url="+encodeURIComponent(window.location.href);
      sharewa.href = "https://api.whatsapp.com/send?text="+encodeURIComponent(document.title)+" "+encodeURIComponent(window.location.href);
      shareml.href = "mailto:?to=&subject="+encodeURIComponent(document.title)+"&body="+encodeURIComponent(window.location.href);

      sharefb.onclick = function() { shareFB(); }
      sharetw.onclick = function() { shareTW(); }
      sharewa.onclick = function() { shareWA(); }
      shareml.onclick = function() { shareMail(); }
      resetParamsBtn.onclick = function() { resetParams(); }
      autoSaveSwitch.onchange = function() { setAutoSave(); }
      autoSaveNum.onchange = function() { setAutoSave(); }
      autoSaveSel.onchange = function() { setAutoSave(); }
      autoSaveExit.onchange = function() { setAutoSaveExit(); }
      textLinesSwitch.onchange = function() { setTextLines(); }
      darkmodeSwitch.onchange = function() { darkModeToggle(); }
      fontSizeNum.onchange = function() { setFont(); }
      fontFamilySel.onchange = function() { setFont(); }
      fontWeightSel.onchange = function() { setFont(); }
      autoSaveDownBtn.onclick = function() { Save(); }
      autoSavePrefBtn.onclick = function() { showPrefModal(); } //!!!!!!!!!!!!!!!!!!!!<<<???

		//if( browser=="Chrome" )
		//	TextLinesToggle();
		setCaret(0);
		SetBar(1);
		Snapshot();
      initFontSel();
		//alert("Please press the Save button to backup your notes. Rapidtables.com will upgrade to secured http in several days.");

      if(!navigator.share) {
         var el = document.querySelector("#toolbar>button:nth-child(3)");
         el.style.display="none";
      }
      var p = GetURLParams();
      if( Object.keys(p).length>0 && p.txt!="" ) {
         area.value = decodeURIComponent(p.txt)+"\n\n"+area.value;
      }
	});
   function GetURLParams()
   {
      var url=window.location.href;
      var regex = /[?&]([^=#]+)=([^&#]*)/g,
            //url = "www.domain.com/?v=123&p=hello",
            params = {},
            match;
      while(match = regex.exec(url)) {
         params[match[1]] = match[2];
      }
      return params;
   }
   function initFontSel()
   {
      // Init font family select
      for(var i=0; i<fontFamilySel.options.length; i++) {
         var ff=fontFamilySel.options[i];
         ff.style.fontFamily=ff.value;
      }
   }
	function onkeydown(e)
	{
      isLocalTxtChange=true;
      isFileTxtChange=true;

		var evtobj = window.event? event : e;
		var ctrlKey=evtobj.ctrlKey;
		var keyCode=evtobj.keyCode;
		if( ctrlKey )
		{
			if( keyCode==key.aKey )
			{
            e.preventDefault();
            SelectAll();  
			}
			if( keyCode==key.sKey )
			{
				e.preventDefault();
				Save();
				return false;
			}
			// Ctrl+Z
			if( keyCode==key.zKey )
			{
				e.preventDefault();
				Undo();
			}
			// Ctrl+Y
			if( keyCode==key.yKey )
			{
				e.preventDefault();
				Redo();
			}
			// Ctrl+C
			if( keyCode==key.cKey )
			{
				//e.preventDefault();
				Copy();
			}
			// Ctrl+V
			if( keyCode==key.vKey )
			{
				if( selectedText.length!=0 )
					e.preventDefault();
				Paste();
			}
			// Ctrl+X
			if( keyCode==key.xKey )
			{
				//e.preventDefault();
				Cut(1);
			}
		}
		// page up/down
		if( keyCode==key.upKey || keyCode==key.downKey )
		{
			area.focus();
		}
		// tab
		if( keyCode==key.tabKey )
		{
			e.preventDefault();
			Snapshot();
			s = getSelect(area);
			var text = area.value;
			fillString(text, '\u0009', s.start, s.end);
			pos = s.start+1;
			setCaret(pos);
		}
		// delete
		if( keyCode==key.delKey )
		{
			Del2();
		}
      // enter: chrome bugfix of text jump when enter in textarea
		if( keyCode==key.enterKey )
		{
			e.preventDefault();
			//Snapshot();
			var text = area.value;
			s = getSelect(area);
         fillString(text, "\n", s.start, s.end);
		   var pos = s.start;
		   setCaret(pos+1);
			Snapshot();
		}
	}
	function LocalLoad()
	{
      //localStorage.persist();
		area.value = localStorage.getItem("notepad_text");
		params = localStorage.getObject("notepad_params");
      //debugger;
      var browser = get_browser();
      if( browser=="Firefox" )
         paramsInit.textLines=false;
      if( window.matchMedia('(prefers-color-scheme: dark)').matches )
         paramsInit.theme=1;
      // Set default values
      if( params==null ) {
         params = paramsInit;
      }
      //if( params.autoSaveExit==undefined )
      //   params.autoSaveExit=false;
      if( typeof Object != "undefined" )
         if( typeof Object.keys != "undefined" ) {     
            var keyNames = Object.keys(paramsInit);
            var prop,name;
            for(prop in keyNames ) {
               name = keyNames[prop];
               if( typeof params[name] === "undefined" )
                  params[name]=paramsInit[name];
            }
         }

      getParams();
      setAutoSave();
      //autoSaveHandle();
      setTextLines();
      if( params.theme==1 )
         //darkModeToggle();
         setDarkMode();

      setFont();
      SetDocTitle();
      if( area.value=="" )
         setWarning();
      var now = new Date();
      var day = now.getDay();
      if( !params.autoSaveExit && day==2 )
         setExitWarning();
	}
	function LocalSave()
	{
      isLocalTxtChange=false;
      localStorage.persist();
		localStorage.setItem("notepad_text",area.value);
	   localStorage.setObject("notepad_params",params);
	}
   function showPrefModal()
   {
      prefModal.show();
      autoSaveModal.hide();
   }
   function showAutoSaveModal()
   {
      prefModal.hide();
      autoSaveModal.show();
   }
   function setWarning()
   {
      var p=document.getElementById("private-alert");
      p.style.display="block";
   }
   function setExitWarning()
   {
      var p=document.getElementById("exit-alert");
      p.style.display="block";
   }
   function getParams()
   {
      filename.value = params.filename;
      //if( params.autoSave==0 ) {
      autoSaveExit.checked = params.autoSaveExit;
      autoSaveSwitch.checked = (params.autoSaveDelay>0)?true:false;
      if( params.autoSaveDelay<3600000 ) params.autoSaveDelay=3600000;
      autoSaveNum.value = (params.autoSaveDelay>=86400000)?Math.round(params.autoSaveDelay/86400000):Math.round(params.autoSave/3600000);
      autoSaveSel.selectedIndex = (params.autoSaveDelay<86400000)?"0":"1";
      //console.log(params.autoSaveDelay);
      textLinesSwitch.checked = params.textLines;
      darkmodeSwitch.checked = (params.theme==0)?false:true;
      fontSizeNum.value = params.fontSize;
      fontFamilySel.selectedIndex = params.fontFamilySel;
      fontWeightSel.selectedIndex = params.fontWeightSel;
   }
   function resetParams()
   {
      resetParamsFlag=true;
      alert("Please reload page to finish reset");
   }
   function setAutoSave()
   {
      if( autoSaveTimeout!=null ) {
         clearTimeout(autoSaveTimeout);
         autoSaveTimeout = null;
      }

      if( autoSaveSwitch.checked ) {
         autoSaveNum.disabled=false;
         autoSaveSel.disabled=false;
         var i=autoSaveSel.selectedIndex;
         var dt=[3600000,86400000]; //1h,1day
         var num=autoSaveNum.value;
         if( num=="" ) num=1;
         var delay=dt[i]*num;
         if( delay<600000 ) return;
         params.autoSaveDelay = delay;
         //autoSaveTimeout = setTimeout(autoSaveHandle, delay);
         var now = Date.now();
         if( params.autoSaveLast==0 )
            params.autoSaveLast = now;
         var dt = params.autoSaveLast+params.autoSaveDelay-now;
         if( dt>0 )
            autoSaveTimeout = setTimeout(autoSaveHandle, dt);
         else {
            dt = dt%params.autoSaveDelay;
            params.autoSaveLast = now-dt;
            autoSaveHandle();
         }
      }
      else {
         autoSaveNum.disabled=true;
         autoSaveSel.disabled=true;
         params.autoSaveDelay = 0;
         params.autoSaveLast = 0;
      }
   }
   function autoSaveHandle()
   {
      var now = Date.now();
      params.autoSaveLast+=params.autoSaveDelay;
      var dt = params.autoSaveLast+params.autoSaveDelay-now;
      autoSaveTimeout = setTimeout(autoSaveHandle, dt);
      if( area.value!="" )
         showAutoSaveModal();
      //console.log(new Date().toLocaleString());
   }
   function setAutoSaveExit()
   {
      if( autoSaveExit.checked )
         params.autoSaveExit=true;
      else
         params.autoSaveExit=false;
   }
   function setTextLines()
   {
      if( textLinesSwitch.checked ) {
         area.classList.add("notes");
         params.textLines=true;
      }
		else {
         area.classList.remove("notes");
         params.textLines=false;
      }
   }
   function toggleClass(sel,class1,class2,class3)
   {
      var s=document.querySelectorAll(sel);
      if( s.length>0 ) {
         for(var i=0; i<s.length; i++) {
            if( typeof class1!=="undefined" )
               s[i].classList.toggle(class1);
            if( typeof class2!=="undefined" )
               s[i].classList.toggle(class2);
            if( typeof class3!=="undefined" )
               s[i].classList.toggle(class3);
         }
      }
   }
   function darkModeToggle()
   {
      if( params.theme==1 ) {
         params.theme = 0;
         darkmodeSwitch.checked=false;
      }
      else {
         params.theme = 1;
         darkmodeSwitch.checked=true;
      }
      setDarkMode();
   }
   function setDarkMode()
   {
      //if( !darkmodeSwitch.checked && params.theme==0 ) return;
      //if( darkmodeSwitch.checked ) {
      if( params.theme==1 ) {
         toggleClass('.btn-light','btn-light','btn-dark');
         //toggleClass('.btn-light','btn-light','btn-light-subtle');
         document.documentElement.setAttribute("data-bs-theme","dark");
         //params.theme = 1;
         //darkmodeSwitch.checked=true;
      }
      else {
         toggleClass('.btn-dark','btn-light','btn-dark');
         //toggleClass('.btn-dark','btn-light','btn-light-subtle');
         document.documentElement.setAttribute("data-bs-theme","light");
         //params.theme = 0;
         //darkmodeSwitch.checked=false;
      }
      toggleClass('#toolbar>.btn>img','img-invert');
      toggleClass('#area','notes','notes-dark');
      toggleClass('body,#menu2,#toolbar,#bar','bg-light','bg-dark');
      toggleClass('#bar','text-light','text-dark');
      //toggleClass('.dropdown-menu','bg-dark','p-2');
      //toggleClass('.dropdown-item','text-light','bg-dark','border-0');
      //toggleClass('.modal-content','text-light','bg-dark');
      //toggleClass('.modal,.close','text-light');
   }
   function setFont()
   {
      area.style.fontSize = fontSizeNum.value+"px";
      area.style.fontFamily = fontFamilySel.options[fontFamilySel.selectedIndex].text;
      area.style.fontWeight = (fontWeightSel.selectedIndex==0)?"normal":"bold";
      params.fontSize = fontSizeNum.value;
      params.fontFamilySel = fontFamilySel.selectedIndex;
      params.fontWeightSel = fontWeightSel.selectedIndex;
   }
   function OnSpell()
   {
      if( spellbtn.classList.contains("active") )
      {
         area.setAttribute("spellcheck", "false");
         spellbtn.classList.remove("active");
      }
      else
      {
         area.setAttribute("spellcheck", "true");
         spellbtn.classList.add("active");
      }
      area.focus();
   }
	function Print()
	{
      win = window.open();
      win.document.write('<html lang="en"><head></head><body style="font-size:'+params.fontSize+'px">');
      var txt=area.value;
      txt=txt.replace(/\t/gi,'&emsp;');
      txt=txt.replace(/\n/gi,'<br>');
      win.document.write(txt);
      win.document.write('</body></html>');
      win.alert("Press browser Menu button and select Print...\nTo save paper & trees: print to PDF file or set 2-sided printing.");
      win.print();
      //win.document.close();
      //win.close();
   }
   function Help()
   {
      window.location.href = 'notepad_help.html';
   }
   // works with chrome, not in FF
   function Exit()
   {
      window.open('','_self','');
      window.close();
   }
	function New()
	{
		cancelSaveFile();
		Snapshot();
		if( area.value != "" )
		{
			var r=confirm("All old text will be deleted. Are you sure?");
			if (r==true)
			{
				area.value = "";
	    		//localStorage.notepad_filename = '';
            params.filename = '';
				SetDocTitle();
				//Snapshot();
			}
		}
		area.focus();
	}
	function Open()
	{
		cancelSaveFile();
		fileElem.focus();
		fileElem.click();
	}
	function Save_As()
	{
		if( area.value=='' ) return;
		getFilename.style.display = "flex";
		//return false;
	}
	function Save()
	{
		if( area.value=='' ) {
         autoSaveModal.show();
         alert("Save canceled - there is no text to save...");
         return;
      }
		
		if( params.filename=='' ) {
         autoSaveModal.hide();
			getFilename.style.display = "flex";
         filename.focus();
      }
		else {
			saveFile();
      }
		
		return false;
	}
   function getShareData()
   {
      var txt=window.getSelection().toString();
      if( txt=="" ) txt=area.value;
      var url="https://www.rapidtables.com/tools/notepad.html?txt="+encodeURIComponent(txt);
      if( url.length>=16384 ) {
         url=url.substring(0,16384);
         alert("The URL length is limited to 16384");
      }
      return { txt:txt, url:url };
   }
   function Share()
   {
      if(navigator.share) {
         var data=getShareData();
         navigator.share({
            title: "My notes",
            text: data.txt,
            url: data.url
         })
         .then(() => console.log('Successful share'))
         .catch(error => console.log('Error sharing:', error));
      }
   }
   function shareFB()
   {
      var data=getShareData();
      sharefb.href = "https://facebook.com/sharer/sharer.php?u="+encodeURIComponent(data.url)+"&title="+encodeURIComponent("My notes");
   }
   function shareTW()
   {
      var data=getShareData();
      sharetw.href = "https://twitter.com/intent/tweet?text="+encodeURIComponent(data.txt)+"&url="+encodeURIComponent(data.url);
   }
   function shareWA()
   {
      var data=getShareData();
      sharewa.href = "https://api.whatsapp.com/send?text="+encodeURIComponent(data.txt)+" "+encodeURIComponent(data.url);
   }
   function shareMail()
   {
      var data=getShareData();
      shareml.href = "mailto:?to=&subject="+encodeURIComponent("My notes")+"&body="+encodeURIComponent(data.txt+"\n"+data.url);
   }
	function SelectAll()
	{
		area.select();
	}
	function Del()
	{
		s = getSelect(area);
		if( s.text.length!=0 )
		{
			Snapshot();
			var text = area.value;
			fillString(text,"", s.start, s.end);
		}
		pos = s.start;
		setCaret(pos);
	}
	function Del2()
	{
		s = getSelect(area);
		if( s.text.length!=0 )
		{
			Snapshot();
			var text = area.value;
			fillString(text,"", s.start, s.end-1);
		}
		pos = s.start;
		setCaret(pos);
	}
	function Cut(isKey)
	{
		s = getSelect(area);
		if( s.text.length!=0 )
		{
			Snapshot();
			selectedText = s.text;
         if( typeof navigator.clipboard !== "undefined" )
            navigator.clipboard.writeText(selectedText);
         if( !isKey )
			   fillString(area.value,"", s.start, s.end);
		}
		else
			selectedText = '';
      if( !isKey )
		{
         pos = s.start;
		   setCaret(pos);
      }
		area.focus();
	}
	function Copy()
	{
		//document.execCommand('copy');
		s = getSelect(area);
		if( s.text.length!=0 )
			selectedText = s.text;
		else
			selectedText = '';
		setSelect(area,s.start,s.end);
		area.focus();
      if( typeof navigator.clipboard !== "undefined" )
         navigator.clipboard.writeText(selectedText);
	}
  	/*
   function Paste()
	{
		s = getSelect(area);
		Snapshot();
		if( selectedText.length!=0 )
		{
			//Snapshot();
			var text = area.value;
			fillString(text, selectedText, s.start, s.end);
			pos = s.start+selectedText.length;
			setCaret(pos);
		}
		area.focus();
      //Requires Permission-Policy clipboard-read permission.
      //navigator.clipboard.readText().then(clipText => var text=clipText);
	}
   */
	function Paste()
	{
		s = getSelect(area);
		Snapshot();
		var text = area.value;
      if( typeof navigator.clipboard !== "undefined" )
      {
         navigator.clipboard.readText().then(clipText => {
            fillString(text, clipText, s.start, s.end);
            pos = s.start+clipText.length;
            setCaret(pos);
         });
      }
		else if( selectedText.length!=0 )
		{
			fillString(text, selectedText, s.start, s.end);
			pos = s.start+selectedText.length;
			setCaret(pos);
		}
		area.focus();
      //Requires Permission-Policy clipboard-read permission.
      //navigator.clipboard.readText().then(clipText => var text=clipText);
	}
	function cancelSaveFile()
	{
		getFilename.style.display = "none";
	}
	function saveFile()
	{
      isFileTxtChange=false;
		getFilename.style.display = "none";
		var name = filename.value;
		if( name=='' ) name='filename.txt';
		//localStorage.notepad_filename = name;
      params.filename = name;
		SetDocTitle();
		LocalSave();
		
		s = area.value;
		OSName = GetOS();
		if( OSName=="Windows" )
			s = s.replace(/\n/g,'\r\n');
		var blob = new Blob([s], {type: "text/plain;charset=utf-8"});
		//saveAs(blob, localStorage.notepad_filename);
		saveAs(blob, params.filename);
	}
	function loadFile()
	{
		var name = fileElem.files[0].name;
		var reader = new FileReader();
	   reader.onloadend = function(evt) {
	    	if( evt.target.readyState==FileReader.DONE ) {
	    		//localStorage.notepad_filename = name;
	    		params.filename = name;
				SetDocTitle();
	    		//area.value = evt.target.result;
	    		s = evt.target.result;
				OSName = GetOS();
				if( OSName=="Windows" )
		    		s = s.replace(/\r\n/g,'\n');
	    		area.value = s;
				area.focus();
            area.scrollTo(0,0);			
      	}
    	};
		reader.readAsText(fileElem.files[0]);
	}
	function getSelect(obj)
	{
		var s = obj.selectionStart;
		var e = obj.selectionEnd;
		var txt = obj.value.substring(s,e);
		return { start: s, end: e, text: txt };
	}
	function setSelect(obj, start, end) 
	{
		obj.focus(); 
		obj.selectionStart = start; 
		obj.selectionEnd = end; 
	}
	function fillString(text, selectText, start, end)
	{
		// split textarea value into three pieces: before startPosition,
	    // startPosition until endPosition, and after endPosition
		var str1 = text.substring(0,start);
		var str2 = text.substring(start,end);
		var str3 = text.substring(end,text.length);
		// replace str2 with formatted substring (selectedText)
		str2 = selectText;
		area.value = str1+str2+str3;
	}
	function getCaret()
	{
		return area.selectionStart;
	}
	function setCaret(pos)
	{
		area.selectionStart = pos;
		area.selectionEnd   = pos;
      area.focus();
	}
	function Snapshot()
	{
		var pos = getCaret();
		var txt = area.value;
		if( ihist>0 && txt_hist[ihist-1]==txt ) return;
		if( ihist==nhist )
		{
			pos_hist.push(pos);
			txt_hist.push(txt);
			ihist++;
			if( pos_hist.length > Nhist )
			{
				pos_hist.shift();
				txt_hist.shift();
				ihist--;
			}
		}
		else
		{
			ihist++;
			pos_hist[ihist] = pos;
			txt_hist[ihist] = txt;
         for(i=ihist+1; i<nhist; i++)
         {
            pos_hist.pop();
            txt_hist.pop();
         }
         ihist++;
		}
		nhist = ihist;
      //console.log("snap: i="+ihist+" n="+nhist);
      //console.log(txt_hist);
	}
	function Undo()
	{
		if( nhist==0 ) return;
		if( ihist==nhist && txt_hist[ihist-1]!=area.value )
			Snapshot();
		if( txt_hist[ihist-1]==area.value )
			ihist--;
      if( ihist<1 ) ihist=1;
		var pos = pos_hist[ihist-1];
		var txt = txt_hist[ihist-1];
		area.value = txt;
		setCaret(pos);
		ihist--;
      if( ihist<1 ) ihist=1;
      //console.log("undo: i="+ihist+" n="+nhist);
      //console.log(txt_hist);
	}
	function Redo()
	{
		if( nhist==0 ) return;
		if( ihist==nhist ) return;
		var pos = pos_hist[ihist];
		var txt = txt_hist[ihist];
		ihist++;
		area.value = txt;
		setCaret(pos);
      //console.log("redo: i="+ihist+" n="+nhist);
      //console.log(txt_hist);
	}
	function DecSize()
	{
		if( params.fontSize > 8 ) 
		{
			params.fontSize--;
			if( params.fontSize >= 15 ) params.fontSize--;
			SetFontSize();
		}
	}
	function IncSize()
	{
		if( params.fontSize < 50 ) 
		{
			params.fontSize++;
			if( params.fontSize >= 15 ) params.fontSize++;
			SetFontSize();
		}
	}
	function SetFontSize()
	{
		area.style.fontSize = params.fontSize+'px';
	}
	function SetDocTitle()
	{
		var name = params.filename;
		if( name=='' )
			//document.title = 'Notepad | Online Notes free, no login required';
			document.title = 'Notepad | Write your notes online';
		else
			document.title = 'Notepad - '+name;
	}
	function SetBar(isNewChar) {
		var pos=area.selectionEnd;
		var txt=area.value;
      if( isNewChar ) {
         chars = txt.length;
         words = txt.countWords();
      }
		txt = txt.substring(0,pos);
      var lines = txt.split('\n');
		var line = lines.length;
		var col = lines[line-1].length+1;
		//$("#bar").html("Line "+line+", Column "+col+"&emsp;&emsp;&emsp; Chars "+chars+", Words "+words);
      bar.innerHTML="Line "+line+", Column "+col+"&emsp;&emsp;&emsp; Chars "+chars+", Words "+words;
	}
   Storage.prototype.setObject = function(key, value) {
      this.setItem(key, JSON.stringify(value));
   }

   Storage.prototype.getObject = function(key) {
      var value = this.getItem(key);
      if( value==null || value=="undefined" ) return null;
      return value && JSON.parse(value);
   }
   Storage.prototype.persist = function() {
      if (navigator.storage && navigator.storage.persist) {
         navigator.storage.persist().then((persistent) => {
            //console.log("Persist "+persistent);
         });
      }
   }   
   String.prototype.countWords = function() {
		return this.trim().split(/\s+\b/).length;
	}
</script>
-->
<script>
var browser,chars,words,selectionStart,selectionEnd,txt_hist,pos_hist,ihist,nhist,Nhist,params,sharefb=document.getElementById("sharefb"),sharetw=document.getElementById("sharetw"),sharewa=document.getElementById("sharewa"),shareml=document.getElementById("shareml"),menu2=document.getElementById("menu2"),toolbar=document.getElementById("toolbar"),getFilename=document.getElementById("getFilename"),bar=document.getElementById("bar"),area=document.getElementById("area"),fileElem=document.getElementById("fileElem"),resetParamsBtn=document.getElementById("resetParamsBtn"),autoSaveSwitch=document.getElementById("autoSaveSwitch"),autoSaveNum=document.getElementById("autoSaveNum"),autoSaveSel=document.getElementById("autoSaveSel"),textLinesSwitch=document.getElementById("textLinesSwitch"),darkmodeSwitch=document.getElementById("darkmodeSwitch"),fontSizeNum=document.getElementById("fontSizeNum"),fontFamilySel=document.getElementById("fontFamilySel"),fontWeightSel=document.getElementById("fontWeightSel"),autoSaveExit=document.getElementById("autoSaveExit"),autoSaveDownBtn=document.getElementById("autoSaveDownBtn"),autoSavePrefBtn=document.getElementById("autoSavePrefBtn"),filename=document.getElementById("filename"),spellbtn=document.getElementById("spellbtn"),resetParamsFlag=!1,selectedText="",ctrlDown=!1,key={tabKey:9,enterKey:13,shiftKey:16,ctrlKey:17,altKey:18,capsKey:20,pageupKey:33,pagedownKey:34,leftKey:37,upKey:38,rightKey:39,downKey:40,delKey:46,aKey:65,cKey:67,sKey:83,vKey:86,xKey:88,yKey:89,zKey:90},autoSaveTimeout=null,isLocalTxtChange=!1,isFileTxtChange=!1,paramsInit={filename:"",autoSaveDelay:864e5,autoSaveLast:0,autoSaveExit:!1,textLines:!0,theme:0,fontSize:14,fontFamilySel:0,fontWeightSel:0};function GetURLParams(){for(var e,t=window.location.href,a=/[?&]([^=#]+)=([^&#]*)/g,n={};e=a.exec(t);)n[e[1]]=e[2];return n}function initFontSel(){for(var e=0;e<fontFamilySel.options.length;e++){var t=fontFamilySel.options[e];t.style.fontFamily=t.value}}function onkeydown(e){isLocalTxtChange=!0,isFileTxtChange=!0;var t=window.event?event:e,a=t.ctrlKey,n=t.keyCode;if(a){if(n==key.aKey&&(e.preventDefault(),SelectAll()),n==key.sKey)return e.preventDefault(),Save(),!1;n==key.zKey&&(e.preventDefault(),Undo()),n==key.yKey&&(e.preventDefault(),Redo()),n==key.cKey&&Copy(),n==key.vKey&&(0!=selectedText.length&&e.preventDefault(),Paste()),n==key.xKey&&Cut(1)}if((n==key.upKey||n==key.downKey)&&area.focus(),n==key.tabKey){e.preventDefault(),Snapshot(),s=getSelect(area);var o=area.value;fillString(o,"	",s.start,s.end),setCaret(r=s.start+1)}if(n==key.delKey&&Del2(),n==key.enterKey){e.preventDefault();var o=area.value;fillString(o,"\n",(s=getSelect(area)).start,s.end);var r=s.start;setCaret(r+1),Snapshot()}}function LocalLoad(){if(area.value=localStorage.getItem("notepad_text"),params=localStorage.getObject("notepad_params"),"Firefox"==get_browser()&&(paramsInit.textLines=!1),window.matchMedia("(prefers-color-scheme: dark)").matches&&(paramsInit.theme=1),null==params&&(params=paramsInit),"undefined"!=typeof Object&&void 0!==Object.keys){var e,t,a=Object.keys(paramsInit);for(e in a)void 0===params[t=a[e]]&&(params[t]=paramsInit[t])}getParams(),setAutoSave(),setTextLines(),1==params.theme&&setDarkMode(),setFont(),SetDocTitle(),""==area.value&&setWarning();var n=new Date().getDay();params.autoSaveExit||2!=n||setExitWarning()}function LocalSave(){isLocalTxtChange=!1,localStorage.persist(),localStorage.setItem("notepad_text",area.value),localStorage.setObject("notepad_params",params)}function showPrefModal(){prefModal.show(),autoSaveModal.hide()}function showAutoSaveModal(){prefModal.hide(),autoSaveModal.show()}function setWarning(){document.getElementById("private-alert").style.display="block"}function setExitWarning(){document.getElementById("exit-alert").style.display="block"}function getParams(){filename.value=params.filename,autoSaveExit.checked=params.autoSaveExit,autoSaveSwitch.checked=params.autoSaveDelay>0,params.autoSaveDelay<36e5&&(params.autoSaveDelay=36e5),autoSaveNum.value=params.autoSaveDelay>=864e5?Math.round(params.autoSaveDelay/864e5):Math.round(params.autoSave/36e5),autoSaveSel.selectedIndex=params.autoSaveDelay<864e5?"0":"1",textLinesSwitch.checked=params.textLines,darkmodeSwitch.checked=0!=params.theme,fontSizeNum.value=params.fontSize,fontFamilySel.selectedIndex=params.fontFamilySel,fontWeightSel.selectedIndex=params.fontWeightSel}function resetParams(){resetParamsFlag=!0,alert("Please reload page to finish reset")}function setAutoSave(){if(null!=autoSaveTimeout&&(clearTimeout(autoSaveTimeout),autoSaveTimeout=null),autoSaveSwitch.checked){autoSaveNum.disabled=!1,autoSaveSel.disabled=!1;var e=autoSaveSel.selectedIndex,t=[36e5,864e5],a=autoSaveNum.value;""==a&&(a=1);var n=t[e]*a;if(!(n<6e5)){params.autoSaveDelay=n;var o=Date.now();0==params.autoSaveLast&&(params.autoSaveLast=o);var t=params.autoSaveLast+params.autoSaveDelay-o;t>0?autoSaveTimeout=setTimeout(autoSaveHandle,t):(t%=params.autoSaveDelay,params.autoSaveLast=o-t,autoSaveHandle())}}else autoSaveNum.disabled=!0,autoSaveSel.disabled=!0,params.autoSaveDelay=0,params.autoSaveLast=0}function autoSaveHandle(){var e=Date.now();params.autoSaveLast+=params.autoSaveDelay,autoSaveTimeout=setTimeout(autoSaveHandle,params.autoSaveLast+params.autoSaveDelay-e),""!=area.value&&showAutoSaveModal()}function setAutoSaveExit(){autoSaveExit.checked?params.autoSaveExit=!0:params.autoSaveExit=!1}function setTextLines(){textLinesSwitch.checked?(area.classList.add("notes"),params.textLines=!0):(area.classList.remove("notes"),params.textLines=!1)}function toggleClass(e,t,a,n){var o=document.querySelectorAll(e);if(o.length>0)for(var r=0;r<o.length;r++)void 0!==t&&o[r].classList.toggle(t),void 0!==a&&o[r].classList.toggle(a),void 0!==n&&o[r].classList.toggle(n)}function darkModeToggle(){1==params.theme?(params.theme=0,darkmodeSwitch.checked=!1):(params.theme=1,darkmodeSwitch.checked=!0),setDarkMode()}function setDarkMode(){1==params.theme?(toggleClass(".btn-light","btn-light","btn-dark"),document.documentElement.setAttribute("data-bs-theme","dark")):(toggleClass(".btn-dark","btn-light","btn-dark"),document.documentElement.setAttribute("data-bs-theme","light")),toggleClass("#toolbar>.btn>img","img-invert"),toggleClass("#area","notes","notes-dark"),toggleClass("body,#menu2,#toolbar,#bar","bg-light","bg-dark"),toggleClass("#bar","text-light","text-dark")}function setFont(){area.style.fontSize=fontSizeNum.value+"px",area.style.fontFamily=fontFamilySel.options[fontFamilySel.selectedIndex].text,area.style.fontWeight=0==fontWeightSel.selectedIndex?"normal":"bold",params.fontSize=fontSizeNum.value,params.fontFamilySel=fontFamilySel.selectedIndex,params.fontWeightSel=fontWeightSel.selectedIndex}function OnSpell(){spellbtn.classList.contains("active")?(area.setAttribute("spellcheck","false"),spellbtn.classList.remove("active")):(area.setAttribute("spellcheck","true"),spellbtn.classList.add("active")),area.focus()}function Print(){(win=window.open()).document.write('<html lang="en"><head></head><body style="font-size:'+params.fontSize+'px">');var e=area.value;e=(e=e.replace(/\t/gi,"&emsp;")).replace(/\n/gi,"<br>"),win.document.write(e),win.document.write("</body></html>"),win.alert("Press browser Menu button and select Print...\nTo save paper & trees: print to PDF file or set 2-sided printing."),win.print()}function Help(){window.location.href="notepad_help.html"}function Exit(){window.open("","_self",""),window.close()}function New(){cancelSaveFile(),Snapshot(),""!=area.value&&!0==confirm("All old text will be deleted. Are you sure?")&&(area.value="",params.filename="",SetDocTitle()),area.focus()}function Open(){cancelSaveFile(),fileElem.focus(),fileElem.click()}function Save_As(){""!=area.value&&(getFilename.style.display="flex")}function Save(){if(""==area.value){autoSaveModal.show(),alert("Save canceled - there is no text to save...");return}return""==params.filename?(autoSaveModal.hide(),getFilename.style.display="flex",filename.focus()):saveFile(),!1}function getShareData(){var e=window.getSelection().toString();""==e&&(e=area.value);var t="https://www.rapidtables.com/tools/notepad.html?txt="+encodeURIComponent(e);return t.length>=16384&&(t=t.substring(0,16384),alert("The URL length is limited to 16384")),{txt:e,url:t}}function Share(){if(navigator.share){var e=getShareData();navigator.share({title:"My notes",text:e.txt,url:e.url}).then(()=>console.log("Successful share")).catch(e=>console.log("Error sharing:",e))}}function shareFB(){var e=getShareData();sharefb.href="https://facebook.com/sharer/sharer.php?u="+encodeURIComponent(e.url)+"&title="+encodeURIComponent("My notes")}function shareTW(){var e=getShareData();sharetw.href="https://twitter.com/intent/tweet?text="+encodeURIComponent(e.txt)+"&url="+encodeURIComponent(e.url)}function shareWA(){var e=getShareData();sharewa.href="https://api.whatsapp.com/send?text="+encodeURIComponent(e.txt)+" "+encodeURIComponent(e.url)}function shareMail(){var e=getShareData();shareml.href="mailto:?to=&subject="+encodeURIComponent("My notes")+"&body="+encodeURIComponent(e.txt+"\n"+e.url)}function SelectAll(){area.select()}function Del(){0!=(s=getSelect(area)).text.length&&(Snapshot(),fillString(area.value,"",s.start,s.end)),setCaret(pos=s.start)}function Del2(){0!=(s=getSelect(area)).text.length&&(Snapshot(),fillString(area.value,"",s.start,s.end-1)),setCaret(pos=s.start)}function Cut(e){0!=(s=getSelect(area)).text.length?(Snapshot(),selectedText=s.text,void 0!==navigator.clipboard&&navigator.clipboard.writeText(selectedText),e||fillString(area.value,"",s.start,s.end)):selectedText="",e||setCaret(pos=s.start),area.focus()}function Copy(){selectedText=0!=(s=getSelect(area)).text.length?s.text:"",setSelect(area,s.start,s.end),area.focus(),void 0!==navigator.clipboard&&navigator.clipboard.writeText(selectedText)}function Paste(){s=getSelect(area),Snapshot();var e=area.value;void 0!==navigator.clipboard?navigator.clipboard.readText().then(t=>{fillString(e,t,s.start,s.end),setCaret(pos=s.start+t.length)}):0!=selectedText.length&&(fillString(e,selectedText,s.start,s.end),setCaret(pos=s.start+selectedText.length)),area.focus()}function cancelSaveFile(){getFilename.style.display="none"}function saveFile(){isFileTxtChange=!1,getFilename.style.display="none";var e=filename.value;""==e&&(e="filename.txt"),params.filename=e,SetDocTitle(),LocalSave(),s=area.value,"Windows"==(OSName=GetOS())&&(s=s.replace(/\n/g,"\r\n")),saveAs(new Blob([s],{type:"text/plain;charset=utf-8"}),params.filename)}function loadFile(){var e=fileElem.files[0].name,t=new FileReader;t.onloadend=function(t){t.target.readyState==FileReader.DONE&&(params.filename=e,SetDocTitle(),s=t.target.result,"Windows"==(OSName=GetOS())&&(s=s.replace(/\r\n/g,"\n")),area.value=s,area.focus(),area.scrollTo(0,0))},t.readAsText(fileElem.files[0])}function getSelect(e){var t=e.selectionStart,a=e.selectionEnd,n=e.value.substring(t,a);return{start:t,end:a,text:n}}function setSelect(e,t,a){e.focus(),e.selectionStart=t,e.selectionEnd=a}function fillString(e,t,a,n){var o=e.substring(0,a),r=e.substring(a,n),l=e.substring(n,e.length);r=t,area.value=o+r+l}function getCaret(){return area.selectionStart}function setCaret(e){area.selectionStart=e,area.selectionEnd=e,area.focus()}function Snapshot(){var e=getCaret(),t=area.value;if(!(ihist>0)||txt_hist[ihist-1]!=t){if(ihist==nhist)pos_hist.push(e),txt_hist.push(t),ihist++,pos_hist.length>Nhist&&(pos_hist.shift(),txt_hist.shift(),ihist--);else{for(pos_hist[++ihist]=e,txt_hist[ihist]=t,i=ihist+1;i<nhist;i++)pos_hist.pop(),txt_hist.pop();ihist++}nhist=ihist}}function Undo(){if(0!=nhist){ihist==nhist&&txt_hist[ihist-1]!=area.value&&Snapshot(),txt_hist[ihist-1]==area.value&&ihist--,ihist<1&&(ihist=1);var e=pos_hist[ihist-1],t=txt_hist[ihist-1];area.value=t,setCaret(e),--ihist<1&&(ihist=1)}}function Redo(){if(0!=nhist&&ihist!=nhist){var e=pos_hist[ihist],t=txt_hist[ihist];ihist++,area.value=t,setCaret(e)}}function DecSize(){params.fontSize>8&&(params.fontSize--,params.fontSize>=15&&params.fontSize--,SetFontSize())}function IncSize(){params.fontSize<50&&(params.fontSize++,params.fontSize>=15&&params.fontSize++,SetFontSize())}function SetFontSize(){area.style.fontSize=params.fontSize+"px"}function SetDocTitle(){var e=params.filename;""==e?document.title="Notepad | Write your notes online":document.title="Notepad - "+e}function SetBar(e){var t=area.selectionEnd,a=area.value;e&&(chars=a.length,words=a.countWords());var n=(a=a.substring(0,t)).split("\n"),o=n.length,r=n[o-1].length+1;bar.innerHTML="Line "+o+", Column "+r+"&emsp;&emsp;&emsp; Chars "+chars+", Words "+words}window.addEventListener("storage",function(e){null==localStorage.getItem("notepad_text")&&LocalSave()}),window.addEventListener("beforeunload",function(e){isFileTxtChange&&""!=area.value&&params.autoSaveExit&&saveFile(),!0==resetParamsFlag&&localStorage.removeItem("notepad_params")}),document.addEventListener("visibilitychange",function(e){"hidden"===document.visibilityState&&(selectedText="",LocalSave())}),document.addEventListener("DOMContentLoaded",function(e){txt_hist=[],pos_hist=[],Nhist=10,nhist=0,ihist=0,prefModal=new bootstrap.Modal("#prefModal",{keyboard:!1}),autoSaveModal=new bootstrap.Modal("#autoSaveModal",{keyboard:!1}),LocalLoad(),area.onkeydown=function(e){onkeydown(e)},area.onkeyup=function(e){-1==[key.shiftKey,key.ctrlKey,key.altKey,key.capsKey,key.pageupKey,key.pagedownKey,key.leftKey,key.upKey,key.rightKey,key.downKey].indexOf(e.which)?SetBar(1):SetBar(0)},area.onclick=function(e){return(pos=getCaret())!=pos_hist[ihist]&&Snapshot(),SetBar(0),!1},sharefb.href="https://facebook.com/sharer/sharer.php?u="+encodeURIComponent(window.location.href)+"&title="+encodeURIComponent(document.title),sharetw.href="https://twitter.com/intent/tweet?text="+encodeURIComponent(document.title)+"&url="+encodeURIComponent(window.location.href),sharewa.href="https://api.whatsapp.com/send?text="+encodeURIComponent(document.title)+" "+encodeURIComponent(window.location.href),shareml.href="mailto:?to=&subject="+encodeURIComponent(document.title)+"&body="+encodeURIComponent(window.location.href),sharefb.onclick=function(){shareFB()},sharetw.onclick=function(){shareTW()},sharewa.onclick=function(){shareWA()},shareml.onclick=function(){shareMail()},resetParamsBtn.onclick=function(){resetParams()},autoSaveSwitch.onchange=function(){setAutoSave()},autoSaveNum.onchange=function(){setAutoSave()},autoSaveSel.onchange=function(){setAutoSave()},autoSaveExit.onchange=function(){setAutoSaveExit()},textLinesSwitch.onchange=function(){setTextLines()},darkmodeSwitch.onchange=function(){darkModeToggle()},fontSizeNum.onchange=function(){setFont()},fontFamilySel.onchange=function(){setFont()},fontWeightSel.onchange=function(){setFont()},autoSaveDownBtn.onclick=function(){Save()},autoSavePrefBtn.onclick=function(){showPrefModal()} //!!!!!!!!!!!!!!!!!!!!<<<???
,setCaret(0),SetBar(1),Snapshot(),initFontSel(),!navigator.share&&(document.querySelector("#toolbar>button:nth-child(3)").style.display="none");var t=GetURLParams();Object.keys(t).length>0&&""!=t.txt&&(area.value=decodeURIComponent(t.txt)+"\n\n"+area.value)}),Storage.prototype.setObject=function(e,t){this.setItem(e,JSON.stringify(t))},Storage.prototype.getObject=function(e){var t=this.getItem(e);return null==t||"undefined"==t?null:t&&JSON.parse(t)},Storage.prototype.persist=function(){navigator.storage&&navigator.storage.persist&&navigator.storage.persist().then(e=>{})},String.prototype.countWords=function(){return this.trim().split(/\s+\b/).length};
</script>
<!--/sse-->
<!-- #EndEditable -->

</body>

</html>
